{
  "vendor": "Code3",
  "deviceFamily": "dynamic-light",
  "proxy": {
    "server": {
      "script": "server-charlie.js",
      "host": "127.0.0.1",
      "port": 8091
    },
    "controller": {
      "host": "192.168.2.80",
      "port": 3000
    },
    "endpoints": {
      "health": {
        "method": "GET",
        "path": "/healthz",
        "description": "Confirms the server ↔ controller link and controller URL."
      },
      "devices": {
        "method": "GET",
        "path": "/api/devicedatas",
        "description": "Returns device list with id, name, status, and online fields."
      },
      "deviceControl": {
        "method": "PATCH",
        "path": "/api/devicedatas/device/:id",
        "description": "Controls light power state and HEX payload."
      },
      "plans": {
        "method": "POST",
        "path": "/controller/plans",
        "description": "Publishes lighting recipes generated by the Excel bridge."
      },
      "schedule": {
        "method": "POST",
        "path": "/controller/sched",
        "description": "Publishes lighting schedules generated by the Excel bridge."
      }
    }
  },
  "deviceIds": {
    "2": "F00001",
    "3": "F00002",
    "4": "F00003",
    "5": "F00005",
    "6": "F00004"
  },
  "hexPayload": {
    "format": "[CW][WW][BL][RD][00][00]",
    "channelRange": "auto (00-FF or 00-64; see config/channel-scale.json)",
    "examples": {
      "safeOn": {
        "status": "on",
        "value": "737373730000",
        "perScale": {
          "00-FF": "737373730000",
          "00-64": "2D2D2D2D0000"
        },
        "notes": "~45% across channels"
      },
      "allOff": {
        "status": "off",
        "value": null
      },
      "red100": {
        "status": "on",
        "value": "000000FF0000",
        "perScale": {
          "00-FF": "000000FF0000",
          "00-64": "000000640000"
        }
      },
      "blue50": {
        "status": "on",
        "value": "000080000000",
        "perScale": {
          "00-FF": "000080000000",
          "00-64": "000032000000"
        }
      }
    }
  },
  "excelBridge": {
    "workbook": "/home/greenreach/LightRecipes.xlsx",
    "sheets": ["Lights", "Recipes", "Schedules"],
    "conversion": "round((pct / 100) * maxByte)",
    "publishesTo": ["/controller/plans", "/controller/sched"],
    "defaultSafeOn": "737373730000",
    "safeOnByScale": {
      "00-FF": "737373730000",
      "00-64": "2D2D2D2D0000"
    }
  },
  "verificationChecklist": [
    "curl -s http://127.0.0.1:8091/healthz → expect 200 OK",
    "curl -s http://127.0.0.1:8091/api/devicedatas → verify Code3 IDs",
    "curl -X PATCH -H 'Content-Type: application/json' -d '{\"status\":\"on\",\"value\":\"737373730000\"}' http://127.0.0.1:8091/api/devicedatas/device/2",
    "Confirm UI spectrum matches controller state",
    "Ensure POST /controller/plans and /controller/sched return 200"
  ]
}
